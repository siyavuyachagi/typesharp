# TypeSharp

Generate TypeScript types from C# models with ease! TypeSharp scans your ASP.NET Core projects and automatically generates TypeScript interfaces from your C# classes decorated with the `[TypeSharp]` attribute.

## Features

âœ¨ **Automatic Type Generation** â€“ Convert C# models to TypeScript interfaces  
ğŸ¯ **Custom Attribute Targeting** â€“ Use `[TypeSharp]` or any custom attribute  
ğŸ”„ **Nullable Support** â€“ `string?` â†’ `string | null`  
ğŸ“¦ **Collection Handling** â€“ Supports `List<T>`, `IEnumerable<T>`, arrays **and generic collections**  
ğŸ§¬ **Generic Types** â€“ Preserves generic type definitions like `Response<T>` â†’ `Response<T>`  
ğŸ§¬ **Inheritance** â€“ Preserves class inheritance using `extends`  
ğŸ¨ **Naming Conventions** â€“ Convert property names (camel, pascal, snake, kebab)  
ğŸ“ **Flexible Output** â€“ Single file or multiple files  
ğŸ”¢ **Enum Support** â€“ Converts C# enums to TypeScript string enums  
ğŸ—‚ï¸ **File Grouping** â€“ Preserves C# file organization (multiple classes per file stay together)

## Installation

```shell
npm i -D https://github.com/siyavuyachagi/typesharp.git
```
or later use ```diff(not yet on `npm`)```
```bash
npm install typesharp --save-dev
```

## Quick Start

### 1. Create an attribute to target
In your target project create the following attribute (`TypeSharp`)
```cs
namespace YourProject.Attribute
{
  [AttributeUsage(AttributeTargets.Class | AttributeTargets.Enum)]
  public class TypeSharpAttribute : Attribute { }
}
```
### 1. Decorate your C# models or DTOs

```csharp
[TypeSharp]
public class User
{
  public int Id { get; set; }
  public string? Name { get; set; }
  public string Email { get; set; }
  public List<string> Roles { get; set; }
  public DateTime CreatedAt { get; set; }
}

[TypeSharp]
public enum UserRole
{
  Admin,
  User,
  Guest
}
```

### 2. Create a configuration file
In your frontend end project run the following script
```bash
npx typesharp init
```
This creates `typesharp.config.json`:

```json
{
  "projectFile": "./Backend/Backend.csproj",
  "outputPath": "./app/types",
  "targetAnnotation": "TypeSharp",
  "singleOutputFile": false,
  "fileNamingConvention": "kebab",
  "namingConvention": "camel"
}
```

### 3. Generate TypeScript types

```bash
npx typesharp
```

Output (`app/types/user.ts`):

```typescript
/**
 * Auto-generated by TypeSharp
 * Generated at: 2024-12-12T10:30:00.000Z
 * Do not edit this file manually
 */

export interface User {
  id: number;
  name: string | null;
  email: string;
  roles: string[];
  createdAt: string;
}
```

## Configuration

### Configuration Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `projectFile` | `string` | *required* | Full path to your C# .csproj file |
| `outputPath` | `string` | *required* | Where to generate TypeScript files |
| `targetAnnotation` | `string` | `'TypeSharp'` | C# attribute name to look for |
| `singleOutputFile` | `boolean` | `false` | Generate one file or multiple files (see below) |
| `fileNamingConvention` | `string` | `'kebab'` | File naming: `kebab`, `camel`, `pascal`, `snake` |
| `namingConvention` | `string` | `'camel'` | Property naming: `camel`, `pascal`, `snake` |
| `fileSuffix` | `string` | `optional` | Suffix for file names: `user-dto.ts` |

### Output File Behavior

TypeSharp preserves your C# file organization. Here's how it works:

| C# File Structure | `singleOutputFile: false` | `singleOutputFile: true` |
|-------------------|---------------------------|--------------------------|
| **One class per file**<br>`User.cs` â†’ 1 class | `user.ts` (1 interface) | All classes in `types.ts` |
| **Multiple classes per file**<br>`UserDtos.cs` â†’ 3 classes | `user-dtos.ts` (3 interfaces) | All classes in `types.ts` |
| **Mixed structure**<br>Various C# files | Each C# file â†’ 1 TS file<br>(preserves grouping) | All classes in `types.ts` |

**Example:**

```
C# Structure:                       TypeScript Output (singleOutputFile: false):
Backend/                           src/types/
â”œâ”€â”€ DTOs/                         â””â”€â”€ DTOs/
â”‚   â”œâ”€â”€ UserDtos.cs               â”‚   â”œâ”€â”€ user-dtos.ts      â† All 3 classes together
â”‚   â”‚   â”œâ”€â”€ UserCreateDto         â”‚   â””â”€â”€ product-dtos.ts   â† All 2 classes together
â”‚   â”‚   â”œâ”€â”€ UserUpdateDto         
â”‚   â”‚   â””â”€â”€ UserResponseDto       
â”‚   â””â”€â”€ ProductDtos.cs            
â”‚       â”œâ”€â”€ ProductDto            
â”‚       â””â”€â”€ ProductCreateDto      
```

**This means if you organize related DTOs in one C# file, they'll stay together in the generated TypeScript file!** ğŸ¯

### Configuration File Formats

TypeSharp supports multiple configuration formats:

**TypeScript** (`typesharp.config.ts`):
```typescript
import { TypeSharpConfig } from 'typesharp';

const config: TypeSharpConfig = {
  projectFile: './Backend/Backend.csproj',
  outputPath: './src/types'
};

export default config;
```

**JavaScript** (`typesharp.config.js`):
```javascript
module.exports = {
  projectFile: './Backend/Backend.csproj',
  outputPath: './src/types'
};
```

**JSON** (`typesharp.config.json`): (recommended)
```json
{
  "projectFile": "./Backend/Backend.csproj",
  "outputPath": "./src/types"
}
```

## CLI Commands

### Generate Types (Default)

```bash
npx typesharp
# or
npx typesharp generate
# or with custom config
npx typesharp generate --config ./custom-config.ts
```

### Initialize Config

```bash
# Create TypeScript config
npx typesharp init

# Create JavaScript config
npx typesharp init --format js

# Create JSON config
npx typesharp init --format json
```

## Usage in package.json

Add TypeSharp to your build scripts:

```json
{
  "scripts": {
    "generate-types": "typesharp",
    "dev": "typesharp && nuxt dev",
    "build": "typesharp && nuxt build"
  }
}
```

## Advanced Examples

### With Inheritance

**C#:**
```csharp
[TypeSharp]
public class BaseEntity
{
    public int Id { get; set; }
    public DateTime CreatedAt { get; set; }
}

[TypeSharp]
public class Product : BaseEntity
{
    public string Name { get; set; }
    public decimal Price { get; set; }
}
```

**Generated TypeScript:**
```typescript
export interface BaseEntity {
  id: number;
  createdAt: string;
}

export interface Product extends BaseEntity {
  name: string;
  price: number;
}
```

### Single Output File

**Config:**
```typescript
const config: TypeSharpConfig = {
  projectFile: './Backend/Backend.csproj',
  outputPath: './src/types',
  singleOutputFile: true
};
```

All types will be generated in `src/types/types.ts`

### Custom Naming Conventions

**Config:**
```typescript
const config: TypeSharpConfig = {
  projectFile: './Backend/Backend.csproj',
  outputPath: './src/types',
  fileNamingConvention: 'snake',    // user_model.ts
  namingConvention: 'pascal'         // UserName, not userName
};
```

## Type Mappings

| C# Type | TypeScript Type |
|---------|-----------------|
| `string` | `string` |
| `int`, `long`, `double`, `float`, `decimal` | `number` |
| `bool` | `boolean` |
| `DateTime`, `DateOnly`, `TimeOnly` | `string` |
| `Guid` | `string` |
| `List<T>`, `IEnumerable<T>`, `T[]` | `T[]` |
| `string?` | `string \| null` |

## Programmatic Usage

You can also use TypeSharp programmatically:

```typescript
import { generate } from 'typesharp';

async function generateTypes() {
  await generate('./path/to/config.ts');
}

generateTypes();
```

## Requirements

- Node.js >= 14
- TypeScript >= 4.5 (if using TypeScript config)

<!-- ## Contributing

Contributions are welcome! Please feel free to submit a Pull Request. -->

## License

MIT Â© Siyavuya Chagi

## Author

**Siyavuya Chagi (CeeJay)**  
- GitHub: [@siyavuyachagi](https://github.com/siyavuyachagi)
- Email: syavuya08@gmail.com

---

Built with â¤ï¸ in South Africa ğŸ‡¿ğŸ‡¦